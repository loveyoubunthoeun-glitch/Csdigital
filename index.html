<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS Digital - ការណែនាំជំរុញទំព័រ Facebook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Kantumruy Pro', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #1877F2 0%, #3B5998 100%);
        }
        h1, h2, h3 {
            font-weight: 700;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg sticky top-0 z-40">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold">CS Digital</h1>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-20 px-6">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between">
            <!-- Text Content -->
            <div class="md:w-1/2 text-center md:text-left mb-10 md:mb-0">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">របៀបជំរុញទំព័រ Facebook របស់អ្នកតាមវិធីឆ្លាតវៃ</h1>
                <p class="text-xl md:text-2xl mb-8">ការណែនាំពេញលេញ ឆ្នាំ 2025</p>
                <p class="max-w-xl text-gray-200">
                    នៅក្នុងឆ្នាំ 2025 នេះ ក្បួនដោះស្រាយ (Algorithm) របស់ Facebook កាន់តែស្មុគស្មាញ ដែលធ្វើឲ្យការផ្សព្វផ្សាយ ឬ "Boost" ក្លាយជាឧបករណ៍សំខាន់សម្រាប់អាជីវកម្មគ្រប់ទំហំ។
                </p>
            </div>
            <!-- Image Content -->
            <div class="md:w-1/2 flex justify-center md:justify-end">
                <img src="Pig digital.png" alt="Digital Marketing" class="rounded-lg shadow-2xl w-full max-w-lg" onerror="this.src='https://placehold.co/600x400/3B5998/FFFFFF?text=CS+Digital'; this.onerror=null;">
            </div>
        </div>
    </section>

    
    <!-- Key Topics Section (from previous step) -->
    <section id="key-topics" class="bg-gray-50 py-16 px-6">
        <div class="container mx-auto max-w-5xl">
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-12">គន្លឹះសំខាន់ៗដែលអ្នកនឹងបានរៀន</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                
                <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <p class="text-lg font-semibold text-blue-700">របៀប Boost Page នៅលើ Facebook ដោយមានប្រសិទ្ធភាពខ្ពស់ | How to Boost Your Facebook Page Effectively in 2025</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <p class="text-lg font-semibold text-blue-700">Boost Page ឲ្យមាន Reach ច្រើនជាងមុន 🚀 | Smart Tips for Facebook Page Growth</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <p class="text-lg font-semibold text-green-700">ចំណាយតិច ប៉ុន្តែបានលទ្ធផលច្រើន 💰 | Optimize Your Facebook Page Boost Budget</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <p class="text-lg font-semibold text-green-700">អ្នកអាជីវកម្មតូចៗត្រូវដឹង! | Facebook Page Boost Strategy for Small Business Owners</p>
                </div>
                 <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <p class="text-lg font-semibold text-purple-700">Boost Page ឲ្យទៅដល់អតិថិជនពិតៗ 🎯 | Targeting Secrets for Facebook Ads Success</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <p class="text-lg font-semibold text-purple-700">មិនមែន Boost គ្រប់ Post ក៏ដូចគ្នាទេ! | The Right Way to Choose What to Boost on Facebook</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <p class="text-lg font-semibold text-blue-700">បង្កើន Like, Comment, និង Share ជាមួយការប្រើ Boost Page យ៉ាងឆ្លាតវៃ 📈</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <p class="text-lg font-semibold text-purple-700">Facebook Boost Page vs Ads Manager – តើមួយណាដែលល្អជាងសម្រាប់អាជីវកម្មរបស់អ្នក?</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <p class="text-lg font-semibold text-blue-700">គន្លឹះសម្ងាត់នៃការធ្វើ Boost Page ឲ្យមាន Engagement ខ្ពស់នៅឆ្នាំ 2025 🔥</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300">
                    <p class="text-lg font-semibold text-blue-700">របៀបបង្កើតការផ្សាយពាណិជ្ជកម្មលើ Facebook ដោយប្រើ Boost Page សម្រាប់អាជីវកម្មខ្មែរ 🇰🇭</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container mx-auto p-6">

        <!-- AI POST ANALYZER SECTION -->
        <section id="ai-post-analyzer" class="bg-white py-16 px-6 rounded-lg shadow-xl mb-16">
            <div class="container mx-auto">
                <div class="bg-white p-8 rounded-lg max-w-3xl mx-auto text-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">សាកល្បង៖ AI វិភាគខ្លឹមសារ Post</h2>
                    <p class="text-gray-600 mb-6">បញ្ចូលផលិតផល និងខ្លឹមសារ Post របស់អ្នក។ AI នឹងវិភាគ និងផ្តល់ពិន្ទុថាតើ Post នេះល្អសម្រាប់ Boost ដែរឬទេ។</p>
                    
                    <div class="flex flex-col gap-4">
                        <input type="text" id="product-name-scan" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="1. បញ្ចូលឈ្មោះផលិតផល (ឧ. កាហ្វេ, ស្បែកជើង...)">
                        
                        <textarea id="post-text-scan" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="5" placeholder="2. បិទភ្ជាប់ (Paste) ខ្លឹមសារ Post របស់អ្នកនៅទីនេះ..."></textarea>
                        
                        <button id="scan-post-button" class="bg-blue-600 text-white font-bold px-8 py-3 rounded-lg hover:bg-blue-700 transition-all duration-300 text-lg transform hover:scale-105">
                            🤖 វិភាគ Post
                        </button>
                    </div>

                    <!-- Loading Spinner -->
                    <div id="post-scan-loading" class="hidden mt-6">
                        <div class="flex justify-center items-center">
                            <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <p class="text-lg text-gray-700">AI កំពុងវិភាគ Post របស់អ្នក...</p>
                        </div>
                    </div>

                    <!-- Scan Results -->
                    <div id="post-scan-results" class="hidden mt-8 text-left p-6 border-4 border-blue-100 bg-blue-50 rounded-lg">
                        <!-- Results will be injected by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW: AI AD COPY GENERATOR -->
        <section id="ai-ad-generator" class="bg-white py-16 px-6 rounded-lg shadow-xl mb-16">
            <div class="container mx-auto">
                <div class="bg-white p-8 rounded-lg max-w-3xl mx-auto text-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">សាកល្បង៖ AI បង្កើត​អត្ថបទ​ផ្សាយ​ពាណិជ្ជកម្ម</h2>
                    <p class="text-gray-600 mb-6">បញ្ចូលឈ្មោះផលិតផល និងចំណុចលក់សំខាន់ៗ។ AI នឹងសរសេរ Ad Copy ដ៏ទាក់ទាញសម្រាប់អ្នក។</p>
                    
                    <div class="flex flex-col gap-4">
                        <input type="text" id="ad-product-name" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="1. បញ្ចូលឈ្មោះផលិតផល (ឧ. ក្រែមលាបមុខ...)">
                        <input type="text" id="ad-key-points" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="2. ចំណុចសំខាន់ (ឧ. បំបាត់មុន, ធានា 100%...)">
                        
                        <button id="generate-ad-button" class="bg-green-600 text-white font-bold px-8 py-3 rounded-lg hover:bg-green-700 transition-all duration-300 text-lg transform hover:scale-105">
                            ✍️ បង្កើតអត្ថបទផ្សាយ
                        </button>
                    </div>

                    <!-- Loading Spinner -->
                    <div id="ad-gen-loading" class="hidden mt-6">
                        <div class="flex justify-center items-center">
                            <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <p class="text-lg text-gray-700">AI កំពុងសរសេរអត្ថបទផ្សាយ...</p>
                        </div>
                    </div>

                    <!-- Ad Copy Results -->
                    <div id="ad-gen-results" class="hidden mt-8 text-left p-6 border-4 border-green-100 bg-green-50 rounded-lg">
                        <h3 class="text-2xl font-bold text-center mb-4 text-green-700">អត្ថបទផ្សាយពាណិជ្ជកម្មរបស់អ្នក!</h3>
                        <textarea id="ad-copy-output" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" rows="10" readonly></textarea>
                        <button id="copy-ad-button" class="mt-4 w-full bg-gray-700 text-white font-bold px-8 py-2 rounded-lg hover:bg-gray-800 transition-all duration-300">
                            ចម្លងអត្ថបទ
                        </button>
                        <p id="copy-success-msg" class="text-green-600 text-center hidden mt-2">បានចម្លងដោយជោគជ័យ!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI AUDIENCE FINDER SECTION -->
        <section id="ai-audience-finder" class="bg-white py-16 px-6 rounded-lg shadow-xl mb-16">
            <div class="container mx-auto">
                <div class="bg-white p-8 rounded-lg max-w-3xl mx-auto text-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">សាកល្បង៖ AI ស្វែងរកអតិថិជនគោលដៅ</h2>
                    <p class="text-gray-600 mb-6">បញ្ចូលឈ្មោះផលិតផល (ឧ. កាហ្វេ, សំលៀកបំពាក់) ហើយ AI នឹងណែនាំទស្សនិកជនគោលដៅ (Core Audience) សម្រាប់អ្នក។</p>
                    
                    <div class="flex flex-col gap-4">
                        <input type="text" id="product-input" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="បញ្ចូលឈ្មោះផលិតផលនៅទីនេះ...">
                        
                        <button id="find-audience-button" class="bg-purple-600 text-white font-bold px-8 py-3 rounded-lg hover:bg-purple-700 transition-all duration-300 text-lg transform hover:scale-105">
                            🎯 ស្វែងរកអតិថិជន
                        </button>
                    </div>

                    <!-- Loading Spinner -->
                    <div id="audience-scan-loading" class="hidden mt-6">
                        <div class="flex justify-center items-center">
                            <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-purple-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <p class="text-lg text-gray-700">AI កំពុងវិភាគផលិតផលរបស់អ្នក...</p>
                        </div>
                    </div>

                    <!-- Scan Results -->
                    <div id="audience-scan-results" class="hidden mt-8 text-left p-6 border-4 border-purple-100 bg-purple-50 rounded-lg">
                        <!-- Results will be injected by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW: AI PRICE TRACKER -->
        <section id="ai-price-tracker" class="bg-white py-16 px-6 rounded-lg shadow-xl mb-16">
            <div class="container mx-auto">
                <div class="bg-white p-8 rounded-lg max-w-3xl mx-auto text-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">សាកល្បង៖ AI ស្វែងរក​តម្លៃ​ទំនិញ</h2>
                    <p class="text-gray-600 mb-6">បញ្ចូលឈ្មោះទំនិញ (ឧ. iPhone 15 Pro Max) ហើយ AI នឹងប៉ាន់ស្មានតម្លៃទីផ្សារបច្ចុប្បន្ននៅកម្ពជា។</p>
                    
                    <div class="flex flex-col gap-4">
                        <input type="text" id="price-product-name" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="បញ្ចូលឈ្មោះទំនិញ (ឧ. iPhone 15...)">
                        
                        <button id="find-price-button" class="bg-red-600 text-white font-bold px-8 py-3 rounded-lg hover:bg-red-700 transition-all duration-300 text-lg transform hover:scale-105">
                            💰 ស្វែងរកតម្លៃ
                        </button>
                    </div>

                    <!-- Loading Spinner -->
                    <div id="price-scan-loading" class="hidden mt-6">
                        <div class="flex justify-center items-center">
                            <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <p class="text-lg text-gray-700">AI កំពុងស្វែងរកតម្លៃទីផ្សារ...</p>
                        </div>
                    </div>

                    <!-- Price Results -->
                    <div id="price-scan-results" class="hidden mt-8 text-left p-6 border-4 border-red-100 bg-red-50 rounded-lg">
                        <!-- Results will be injected by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Marketing Strategy Section -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-6 border-b-4 border-blue-500 pb-2">🔥 យុទ្ធសាស្ត្រទីផ្សារ៖ លើសពីការចុចប៊ូតុង "Boost"</h2>
            
            <div class="bg-white p-6 rounded-lg shadow-xl mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-blue-700">រូបមន្តសម្ងាត់៖ តើ Post បែបណាដែលគួរ Boost?</h3>
                <p class="mb-4">មិនមែនគ្រប់ Post ទាំងអស់សមនឹងទទួលបានការ Boost នោះទេ។ នេះគឺជាគន្លឹះសំខាន់ៗមួយចំនួន៖</p>
                <ul class="list-disc list-inside space-y-3">
                    <li><strong class="font-semibold">Boost ខ្លឹមសារដែលមានស្រាប់ល្អ (High-Performing Content)៖</strong> ពង្រីកភាពជោគជ័យនៃ Post ដែលទទួលបាន Engagement ល្អតាមធម្មជាតិ។</li>
                    <li><strong class="font-semibold">ខ្លឹមសារដែលមានតម្លៃ (Valuable Content)៖</strong> ជំរុញការផ្សាយដែលផ្តល់ដំណោះស្រាយ គន្លឹះ ឬព័ត៌មានមានប្រយោជន៍ ដើម្បីสร้างទំនុកចិត្ត។</li>
                    <li><strong class="font-semibold">ការអំពាវនាវឱ្យធ្វើសកម្មភាពច្បាស់លាស់ (Clear CTA)៖</strong> ប្រាប់អ្នកមើលឱ្យច្បាស់ថាត្រូវធ្វើអ្វីបន្ទាប់ (ឧទាហរណ៍៖ "ទិញឥឡូវនេះ", "ផ្ញើសារមកយើង")។</li>
                    <li><strong class="font-semibold">រូបភាព ឬវីដេអូដែលទាក់ទាញភ្នែក៖</strong> ការមើលឃើញ (Visual) គឺជារឿងសំខាន់បំផុត។</li>
                    <li><strong class="font-semibold">ការផ្តល់ជូនពិសេស (Special Offers)៖</strong> ការបញ្ចុះតម្លៃ ឬប្រូម៉ូសិន គឺជាហេតុផលដ៏ល្អក្នុងការ Boost។</li>
                </ul>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-xl">
                <h3 class="text-2xl font-semibold mb-4 text-blue-700">Facebook Boost Post vs. Ads Manager</h3>
                <p class="mb-6">នេះគឺជាសំណួរចំបងដែលអាជីវកម្មជាច្រើនឆ្ងល់។ មួយណាធ្វើអោយអាជីវកម្មរបស់អ្នករីកចម្រើនជាង?</p>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="border border-gray-200 p-4 rounded-lg">
                        <h4 class="text-xl font-bold mb-2">Boost Post (ជំរុញការផ្សាយ)</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li><strong class="font-semibold">ភាពងាយស្រួល៖</strong> លឿន និងងាយស្រួលធ្វើដោយផ្ទាល់ពីទំព័រ។</li>
                            <li><strong class="font-semibold">គោលដៅ៖</strong> ល្អសម្រាប់ការបង្កើន Engagement និង Reach។</li>
                            <li class="text-red-600"><strong class="font-semibold">ដែនកំណត់៖</strong> ជម្រើសកំណត់គោលដៅមានកំណត់។</li>
                        </ul>
                    </div>
                    <div class="border border-gray-200 p-4 rounded-lg bg-blue-50">
                        <h4 class="text-xl font-bold mb-2">Ads Manager (កម្មវិធីគ្រប់គ្រង)</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li><strong class="font-semibold">ថាមពល៖</strong> ផ្តល់នូវការគ្រប់គ្រងពេញលេញលើគោលដៅ។</li>
                            <li><strong class="font-semibold">គោលដៅ៖</strong> ល្អបំផុតសម្រាប់គោលដៅជាក់លាក់ (ការលក់, Leads)។</li>
                            <li class="text-yellow-700"><strong class="font-semibold">ភាពស្មុគស្មាញ៖</strong> ទាមទារចំណេះដឹងច្រើនជាង។</li>
                        </ul>
                    </div>
                </div>
                <p class="mt-6 bg-yellow-100 text-yellow-800 p-4 rounded-lg">
                    <strong class="font-bold">សេចក្តីសន្និដ្ឋាន៖</strong> សម្រាប់អ្នកចាប់ផ្តើមដំបូង **Boost Post** គឺល្អ។ សម្រាប់យុទ្ធនាការដែលផ្តោតលើ ROI និងការលក់ **Ads Manager** គឺជាអ្នកឈ្នះ។
                </p>
            </div>
        </section>

        <!-- Business Strategy Section -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-6 border-b-4 border-green-500 pb-2">💰 យុទ្ធសាស្ត្រអាជីវកម្ម៖ បញ្ឈប់ការខ្ជះខ្ជាយថវិកា</h2>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-xl">
                    <h3 class="text-2xl font-semibold mb-4 text-green-700">ប្លង់មេ ROI៖ កំណត់គោលដៅរបស់អ្នកជាមុន</h3>
                    <p class="mb-4">មុនពេលអ្នកចំណាយលុយមួយសេន សូមសួរខ្លួនឯងថា "តើខ្ញុំចង់សម្រេចបានអ្វី?"</p>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>ការយល់ដឹងអំពីម៉ាក (Brand Awareness)៖</strong> ឱ្យមនុស្សកាន់តែច្រើនស្គាល់ម៉ាករបស់អ្នក។</li>
                        <li><strong>ការចូលរួម (Engagement)៖</strong> ចង់ឱ្យមនុស្ស Like, Comment, ឬ Share។</li>
                        <li><strong>ចរាចរណ៍ (Traffic)៖</strong> ដឹកនាំមនុស្សទៅកាន់គេហទំព័ររបស់អ្នក។</li>
                        <li><strong>ការលក់ (Sales)៖</strong> ឱ្យមនុស្សទិញផលិតផល ឬសេវាកម្ម។</li>
                    </ul>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow-xl">
                    <h3 class="text-2xl font-semibold mb-4 text-green-700">យុទ្ធសាស្ត្រសម្រាប់អាជីវកម្មខ្នាតតូច</h3>
                     <p class="mb-4">ប្រសិនបើអ្នកមានថវិកាតិចតួច រាល់ដុល្លារមានតម្លៃ។</p>
                    <ul class="list-decimal list-inside space-y-2">
                        <li><strong>ចាប់ផ្តើមតូច (Start Small)៖</strong> សាកល្បង Boost ជាមួយថវិកាតិច (ឧទាហរណ៍ 5$)។</li>
                        <li><strong>កំណត់គោលដៅក្នុងតំបន់ (Local Targeting)៖</strong> កំណត់គោលដៅមនុស្សនៅក្នុងទីក្រុង ឬតំបន់របស់អ្នក។</li>
                        <li><strong>ប្រើ Lookalike Audiences (ពេលក្រោយ)៖</strong> ស្វែងរកមនុស្សថ្មីដែល "មើលទៅដូច" អតិថិជនបច្ចុប្បន្នរបស់អ្នក។</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Technical Guide Section -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-6 border-b-4 border-purple-500 pb-2">⚙️ ការណែនាំបច្ចកទេស៖ ជៀសវាងកំហុសឆ្ងងទូទៅ</h2>

            <!-- New Target Audience Section -->
            <div class="bg-white p-6 rounded-lg shadow-xl mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-purple-700">🎯 ស្វែងយល់ពីទស្សនិកជនគោលដៅ (Target Audience) របស់អ្នក</h3>
                <p class="mb-6">ដើម្បី Boost ឱ្យមានប្រសិទ្ធភាព អ្នកត្រូវដឹងថាអ្នកកំពុងនិយាយទៅកាន់នរណា។ Facebook ចែកទស្សនិកជនជា ៣ ប្រភេទធំៗ៖</p>
                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Core Audiences -->
                    <div class="border border-purple-200 p-4 rounded-lg bg-purple-50">
                        <h4 class="text-lg font-bold mb-2">1. ទស្សនិកជនស្នូល (Core Audiences)</h4>
                        <p class="text-sm">កំណត់គោលដៅដោយផ្អែកលើ៖</p>
                        <ul class="list-disc list-inside text-sm mt-2 space-y-1">
                            <li><strong>ប្រជាសាស្ត្រ៖</strong> អាយុ ភេទ ភាសា ការសិក្សា...</li>
                            <li><strong>ទីតាំង៖</strong> ប្រទេស ក្រុង ឬតំបន់ជាក់លាក់</li>
                            <li><strong>ចំណាប់អារម្មណ៍៖</strong> អ្វីដែលពួកគេចូលចិត្ត (ឧ. "ទិញទំនិញអនឡាញ")</li>
                            <li><strong>ឥរិយាបថ៖</strong> អ្វីដែលពួកគេធ្វើ (ឧ. "ប្រើ iPhone 15")</li>
                        </ul>
                        <p class="text-xs font-semibold mt-3 text-purple-800">ល្អបំផុតសម្រាប់៖ ស្វែងរកអតិថិជនថ្មី</p>
                    </div>
                    <!-- Custom Audiences -->
                    <div class="border border-purple-200 p-4 rounded-lg bg-purple-50">
                        <h4 class="text-lg font-bold mb-2">2. ទស្សនិកជនផ្ទាល់ខ្លួន (Custom Audiences)</h4>
                         <p class="text-sm">កំណត់គោលដៅមនុស្សដែលស្គាល់អ្នករួចហើយ៖</p>
                        <ul class="list-disc list-inside text-sm mt-2 space-y-1">
                            <li>បញ្ជីអតិថិជន (Email ឬលេខទូរស័ពទ)</li>
                            <li>អ្នកចូលមើលគេហទំព័រ (Website Visitors)</li>
                            <li>អ្នកធ្លាប់ Like ឬផ្ញើសារមក Page</li>
                            <li>អ្នកធ្លាប់មើលវីដេអូរបស់អ្នក</li>
                        </ul>
                         <p class="text-xs font-semibold mt-3 text-purple-800">ល្អបំផុតសម្រាប់៖ ការលក់បន្ត (Remarketing)</p>
                    </div>
                    <!-- Lookalike Audiences -->
                    <div class="border border-purple-200 p-4 rounded-lg bg-purple-50">
                        <h4 class="text-lg font-bold mb-2">3. ទស្សនិកជនស្រដៀងគ្នា (Lookalike Audiences)</h4>
                         <p class="text-sm">ស្វែងរកមនុស្ស "ថ្មី" ដែលមានលក្ខណៈស្រដៀងនឹង៖</p>
                        <ul class="list-disc list-inside text-sm mt-2 space-y-1">
                            <li>អតិថិជនល្អបំផុតរបស់អ្នក</li>
                            <li>អ្នកដែល Like Page របស់អ្នក</li>
                            <li>អ្នកដែលបានចូលមើលគេហទំព័រ</li>
                        </ul>
                        <p class="text-xs font-semibold mt-3 text-purple-800">ល្អបំផុតសម្រាប់៖ ពង្រីកអាជីវកម្មលឿន</p>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-xl mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-red-700">ជៀសវាងកំហុសទាំង ៧ នេះ</h3>
                <ol class="list-decimal list-inside space-y-2">
                    <li><strong>ការមិនកំណត់គោលដៅ (Vague Targeting)៖</strong> Boost ទៅ "Everyone"។</li>
                    <li><strong>ការជ្រើសរើស Post ខុស (Boosting the Wrong Post)៖</strong> Boost តែខ្លឹមសារល្អបំផុត។</li>
                    <li><strong>ការមិនអើពើនឹង Facebook Algorithm៖</strong> Boost Post ដែលគួរឱ្យធុញ។</li>
                    <li><strong>រូបភាពមិនស្អាត (Poor Visuals)៖</strong> រូបភាពព្រាល ឬមានអក្សរច្រើនពេក។</li>
                    <li><strong>ភ្លេច CTA (No Call-to-Action)៖</strong> អ្នកមើលមិនដឹងថាត្រូវធ្វើអ្វី។</li>
                    <li><strong>កំណត់ថវិកាតិចពេក ឬច្រើនពេក (Wrong Budget)៖</strong> មិនសាកល្បង។</li>
                    <li><strong>មិនតាមដានលទ្ធផល (Not Analyzing Results)៖</strong> មិនរៀនសូត្រសម្រាប់លើកក្រោយ។</li>
                </ol>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-xl">
                <h3 class="text-2xl font-semibold mb-4 text-gray-700">ការដោះស្រាយបញ្ហា (Troubleshooting)</h3>
                <p class="font-semibold mb-2">"ហេតុអ្វីបានជាការ Boost របស់ខ្ញុំមិនទទួលបានលទ្ធផល?"</p>
                <ul class="list-disc list-inside space-y-2">
                    <li><strong>ពិនិត្យទស្សនិកជន (Audience) របស់អ្នក៖</strong> តើវាចង្អៀតពេក ឬធំពេក?</li>
                    <li><strong>ពិនិត្យខ្លឹមសារ (Content) របស់អ្នក៖</strong> តើវាពិតជាទាក់ទាញមែនទេ?</li>
                    <li><strong>ពិនិត្យមើលភាពញឹកញាប់ (Frequency)៖</strong> តើមនុស្សដដែលឃើញការផ្សាយរបស់អ្នកច្រើនដងពេកទេ?</li>
                </ul>
            </div>
        </section>

        <!-- Conclusion -->
        <section class="bg-gray-800 text-white p-10 rounded-lg shadow-xl text-center">
            <h2 class="text-3xl font-bold mb-4">សេចក្តីសន្និដ្ឋាន</h2>
            <p class="max-w-3xl mx-auto text-lg">
                ការជំរុញទំព័រ Facebook ក្នុងឆ្នាំ 2025 គឺ<span class="text-red-500 font-bold">ការរួមបញ្ចូលគ្នា</span>រវាងសិល្បៈ (ខ្លឹមសារល្អ) និងវិទ្យាសាស្ត្រ (ទិន្នន័យ និងការកំណត់គោលដៅ)។ ដោយផ្តោតលើយុទ្ធសាស្ត្រអាជីវកម្មច្បាស់លាស់ និងការអនុវត្តបច្ចកទេសត្រឹមត្រូវ អ្នកអាចបំប្លែងថវិកាផ្សព្វផ្សាយរបស់អ្នក ទៅជាលទ្ធផលអាជីវកម្មពិតប្រាកដ។
            </p>
        </section>

    </main>

    <!-- NEW: Contact Form Section -->
    <section id="contact-form" class="bg-gray-50 py-16 px-6">
        <div class="container mx-auto max-w-lg p-8 rounded-lg shadow-2xl border border-gray-200">
            <h2 class="text-3xl font-bold text-gray-900 mb-4 text-center">ទាក់ទងមកពួកយើង</h2>
            <p class="text-gray-600 mb-8 text-center">មានសំណួរ? សូមផ្ញើសារមកកាន់ពួកយើង!</p>
            <form id="telegram-form" class="flex flex-col gap-4">
                <input type="text" id="name" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="ឈ្មោះរបស់អ្នក" required>
                <input type="email" id="email" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="អ៊ីមែលរបស់អ្នក" required>
                <textarea id="message" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="5" placeholder="សាររបស់អ្នក..." required></textarea>
                <button type="submit" id="send-message-button" class="bg-green-600 text-white font-bold px-8 py-3 rounded-lg hover:bg-green-700 transition-all duration-300 text-lg">
                    ផ្ញើសារ
                </button>
                <p id="form-success-message" class="text-green-600 text-center hidden mt-4">សាររបស់អ្នកត្រូវបានផ្ញើដោយជោគជ័យ!</p>
                <p id="form-error-message" class="text-red-600 text-center hidden mt-4">មានបញ្ហាក្នុងការផ្ញើសារ។</p>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-200 text-gray-600 py-8 mt-12">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 CS Digital. រក្សាសិទ្ធិគ្រប់យ៉ាង។</p>
            <p class="text-sm mt-2">ការណែនាំនេះត្រូវបានបង្កើតឡើងសម្រាប់គោលបំណងអប់រំ។</p>
            
            <!-- Admin Links -->
            <div class="mt-4 pt-4 border-t border-gray-300">
                <h4 class="font-semibold text-gray-700 mb-2">Admin & Support</h4>
                <div class="flex justify-center gap-4">
                    <a href="https://t.me/ChhaySemZ" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">@ChhaySemZ</a>
                    <a href="https://t.me/TheDigitalMarketingNew" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Telegram Group</a>
                    <a href="https://web.facebook.com/profile.php?id=61551780722669" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Facebook Page</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- AI Chat Widget -->
    <div id="ai-chat-widget" class="fixed bottom-6 right-6 z-50">
        <!-- Chat Button -->
        <button id="chat-toggle-button" class="gradient-bg text-white w-16 h-16 rounded-full shadow-xl flex items-center justify-center focus:outline-none transform transition-transform hover:scale-110">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H6L4 18V4H20V16Z"/>
                <path d="M7 9H17V11H7zM7 12H14V14H7z"/>
            </svg>
        </button>

        <!-- Chat Window -->
        <div id="chat-window" class="fixed bottom-24 right-6 w-80 md:w-96 h-[500px] bg-white rounded-lg shadow-2xl flex flex-col hidden transform transition-all duration-300 origin-bottom-right scale-95 opacity-0">
            <!-- Chat Header -->
            <div class="gradient-bg text-white p-4 rounded-t-lg flex justify-between items-center">
                <h3 class="text-lg font-semibold">ជំនួយការ AI</h3>
                <button id="chat-close-button" class="focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Messages Area -->
            <div id="chat-messages" class="flex-1 p-4 overflow-y-auto space-y-3">
                <!-- Messages will be dynamically added here -->
            </div>

            <!-- Quick Replies -->
            <div id="quick-replies" class="p-2 border-t border-gray-200 flex flex-wrap gap-2 justify-center">
                <!-- Quick replies will be added here -->
            </div>

            <!-- Input Area -->
            <div class="p-4 border-t border-gray-200 flex space-x-2">
                <input type="text" id="chat-input" placeholder="សរសេរសារ..." class="flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <button id="chat-send-button" class="gradient-bg text-white rounded-full w-10 h-10 flex items-center justify-center focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009.175 16V4a1 1 0 00-.894-1.447z" />
                        <path d="M10.11 6.09L6 7.429V16l4.11-1.174A1 1 0 0011.825 14L17 12.571V4l-6.89 2.09z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK Scripts -->
    <script type="module">
        // --- MAIN WEBSITE SCRIPT (from original file) ---
        document.addEventListener('DOMContentLoaded', () => {
            
            // ... existing chat widget code ...
            const chatToggleButton = document.getElementById('chat-toggle-button');
            const chatWindow = document.getElementById('chat-window');
            const chatCloseButton = document.getElementById('chat-close-button');
            const chatMessages = document.getElementById('chat-messages');
            const chatInput = document.getElementById('chat-input');
            const chatSendButton = document.getElementById('chat-send-button');
            const quickRepliesContainer = document.getElementById('quick-replies');

            const toggleChatWindow = () => {
                const isHidden = chatWindow.classList.contains('hidden');
                if (isHidden) {
                    chatWindow.classList.remove('hidden', 'scale-95', 'opacity-0');
                    chatWindow.classList.add('scale-100', 'opacity-100');
                    if (chatMessages.children.length === 0) {
                        displayWelcomeMessage();
                    }
                } else {
                                        chatWindow.classList.add('scale-95', 'opacity-0');
                    setTimeout(() => chatWindow.classList.add('hidden'), 300);
                }
            };

            chatToggleButton.addEventListener('click', toggleChatWindow);
            chatCloseButton.addEventListener('click', toggleChatWindow);

            const addMessage = (text, sender) => {
                const messageElement = document.createElement('div');
                messageElement.innerText = text;
                
                if (sender === 'user') {
                    messageElement.className = 'bg-blue-500 text-white p-3 rounded-lg self-end max-w-xs break-words';
                } else {
                    messageElement.className = 'bg-gray-200 text-gray-800 p-3 rounded-lg self-start max-w-xs break-words';
                }
                
                chatMessages.appendChild(messageElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            };

            const addQuickReplies = (replies) => {
                quickRepliesContainer.innerHTML = '';
                if (!replies || replies.length === 0) {
                    quickRepliesContainer.classList.add('hidden');
                    return;
                }
                
                quickRepliesContainer.classList.remove('hidden');
                replies.forEach(reply => {
                    const button = document.createElement('button');
                    button.innerText = reply;
                    button.className = 'bg-gray-100 border border-gray-300 rounded-full px-3 py-1 text-sm text-blue-700 hover:bg-gray-200';
                    button.addEventListener('click', () => {
                        handleUserInput(reply);
                    });
                    quickRepliesContainer.appendChild(button);
                });
            };

            const displayWelcomeMessage = () => {
                addMessage('សួស្តី! ខ្ញុំជាជំនួយការ AI។ តើខ្ញុំអាចជួយអ្វីបាន? នេះគឺជាសំណួរទូទៅមួយចំនួន៖', 'ai');
                addQuickReplies([
                    'Boost Post vs Ads Manager?',
                    'តើ Post បែបណាគួរ Boost?',
                    'កំហុសទូទៅពេល Boost?'
                ]);
            };

            const getAiResponse = (userInput) => {
                const input = userInput.toLowerCase();
                let response = "សូមអភ័យទោស ខ្ញុំមិនយល់សំណួរនោះទេ។ សូមសាកល្បងសួរអំពី 'Boost vs Ads Manager' ឬ 'កំហុសទូទៅ'។";
                let replies = ['Boost Post vs Ads Manager?', 'តើ Post បែបណាគួរ Boost?', 'កំហុសទូទៅពេល Boost?'];

                if (input.includes('boost post') || input.includes('ads manager')) {
                    response = "Boost Post គឺងាយស្រួល និងលឿន ល្អសម្រាប់ Engagement។ Ads Manager គឺស្មុគស្មាញជាង តែផ្តល់ការគ្រប់គ្រងពេញលេញ ល្អសម្រាប់ការលក់ និង ROI។";
                } else if (input.includes('post') && (input.includes('boost') || input.includes('គួរ'))) {
                    response = "អ្នកគួរ Boost Post ដែលមាន Engagement ល្អស្រាប់, មានតម្លៃ (ដូចជា គន្លឹះ), មាន CTA ច្បាស់លាស់, និងមានរូបភាព/វីដេអូទាក់ទាញ។";
                } else if (input.includes('កំហុស') || input.includes('mistake')) {
                    response = "កំហុសទូទៅរួមមាន៖ ការមិនកំណត់គោលដៅច្បាស់លាស់ (Vague Targeting), ជ្រើសរើស Post ខុស, ភ្លេច CTA, និងមិនតាមដានលទ្ធផល។";
                } else if (input.includes('សួស្តី') || input.includes('hello')) {
                    response = "សួស្តី! តើអ្នកចង់សួរអំពីអ្វី? នេះគឺជាជម្រើសមួយចំនួន៖";
                } else if (input.includes('យុទ្ធសាស្ត្រ') || input.includes('business')) {
                    response = "យុទ្ធសាស្ត្រអាជីវកម្មសំខាន់គឺ៖ កំណត់គោលដៅ (ROI) របស់អ្នកជាមុន (Awareness, Traffic, ឬ Sales) និងចាប់ផ្តើមតូច (5$) បើអ្នកជាអាជីវកម្មខ្នាតតូច។";
                    replies = ['តើ ROI ជាអ្វី?', 'យុទ្ធសាស្ត្រអាជីវកម្មតូច?'];
                }

                setTimeout(() => {
                    addMessage(response, 'ai');
                    addQuickReplies(replies);
                }, 500);
            };

            const handleUserInput = (text) => {
                const userInput = text.trim();
                if (userInput === '') return;

                addMessage(userInput, 'user');
                chatInput.value = '';
                addQuickReplies([]); // Clear quick replies while AI is "thinking"
                
                getAiResponse(userInput);
            };

            chatSendButton.addEventListener('click', () => handleUserInput(chatInput.value));
            chatInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    handleUserInput(chatInput.value);
                }
            });

            // --- AI POST ANALYZER CODE ---
            const scanPostButton = document.getElementById('scan-post-button');
            const productNameScanInput = document.getElementById('product-name-scan');
            const postTextScanInput = document.getElementById('post-text-scan');
            const postLoadingSpinner = document.getElementById('post-scan-loading');
            const postResultsDiv = document.getElementById('post-scan-results');

            if (scanPostButton) {
                scanPostButton.addEventListener('click', async () => {
                    const productName = productNameScanInput.value;
                    const postText = postTextScanInput.value;

                    if (productName.trim().length < 2 || postText.trim().length < 10) {
                        postResultsDiv.innerHTML = `<p class="text-red-600 font-semibold">សូមបញ្ចូលឈ្មោះផលិតផល និងខ្លឹមសារ Post (យ៉ាងហោចណាស់ 10 តួអក្សរ)។</p>`;
                        postResultsDiv.classList.remove('hidden');
                        postLoadingSpinner.classList.add('hidden');
                        return;
                    }

                    postLoadingSpinner.classList.remove('hidden');
                    postResultsDiv.classList.add('hidden');
                    scanPostButton.disabled = true;
                    scanPostButton.classList.add('opacity-75');

                    try {
                        const analysis = await getAiPostAnalysis(productName, postText);
                        
                        let scoreColor = "text-red-600";
                        if (analysis.score > 85) {
                            scoreColor = "text-green-600";
                        } else if (analysis.score > 65) {
                            scoreColor = "text-blue-700";
                        }

                        let resultsHTML = `
                            <h3 class="text-3xl font-bold text-center mb-4 ${scoreColor}">${analysis.score}/100 - ${analysis.scoreText}</h3>
                            <p class="text-center text-gray-700 mb-4">ការវិភាគសម្រាប់ Post លក់ <strong>"${analysis.productName}"</strong></p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                    <h4 class="text-lg font-semibold text-green-800 mb-2">✅ គុណសម្បត្តិ (Pros)</h4>
                                    <ul class="list-disc list-inside space-y-1 text-green-700">
                                        ${analysis.pros.map(pro => `<li>${pro}</li>`).join('')}
                                    </ul>
                                </div>
                                <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                                    <h4 class="text-lg font-semibold text-red-800 mb-2">❌ គុណវិបត្តិ (Cons & Suggestions)</h4>
                                    <ul class="list-disc list-inside space-y-1 text-red-700">
                                         ${analysis.cons.map(con => `<li>${con}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        `;

                        postResultsDiv.innerHTML = resultsHTML;
                        postResultsDiv.classList.remove('hidden');

                    } catch (error) {
                        console.error("Error fetching AI post analysis:", error);
                        postResultsDiv.innerHTML = `<p class="text-red-600 font-semibold">មានបញ្ហាក្នុងការទាក់ទង AI។ សូមព្យាយាមម្តងទៀត។</p>`;
                        postResultsDiv.classList.remove('hidden');
                    } finally {
                        postLoadingSpinner.classList.add('hidden');
                        scanPostButton.disabled = false;
                        scanPostButton.classList.remove('opacity-75');
                    }
                });
            }

            // --- AI POST ANALYSIS API CALL ---
            async function getAiPostAnalysis(productName, postText) {
                const apiKey = "AIzaSyBFsZOA7uK4kb0nFign9q_o-HxImjgQW8A"; // ADDED API KEY
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                const systemPrompt = "You are a professional Cambodian Facebook marketing expert. Your job is to analyze a Facebook post intended to sell a product and determine how effective it would be for a 'Boost Post' campaign in Khmer. You must respond in JSON.";
                const userQuery = `Analyze this Facebook post text intended to sell "${productName}". 
                Post Text: "${postText}"
                
                Provide an analysis:
                1.  productName: The product name I provided.
                2.  score: A score from 0 to 100 on its effectiveness for boosting.
                3.  scoreText: A very brief summary (3-5 words in Khmer) of the score (e.g., "ល្អឥតខ្ចោះ", "ល្អបង្គួរ", "ត្រូវកែលម្អច្រើន").
                4.  pros: An array of 3 brief bullet points (in Khmer) listing what is good about the post (e.g., "CTA ច្បាស់លាស់", "មាន Emoji ទាក់ទាញ").
                5.  cons: An array of 3 brief bullet points (in Khmer) listing what is bad or missing, and how to improve it (e.g., "ខ្វះ CTA", "គួរ​បន្ថែម​រូបភាព", "ខ្លឹមសារ​វែង​ពេក")
                
                Focus the analysis on engagement, clarity, Call-to-Action (CTA), and visual appeal cues (like emojis).`;

                const payload = {
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                    contents: [{ parts: [{ text: userQuery }] }],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "OBJECT",
                            properties: {
                                "productName": { "type": "STRING" },
                                "score": { "type": "NUMBER" },
                                "scoreText": { "type": "STRING" },
                                "pros": { "type": "ARRAY", "items": { "type": "STRING" } },
                                "cons": { "type": "ARRAY", "items": { "type": "STRING" } }
                            },
                            required: ["productName", "score", "scoreText", "pros", "cons"]
                        }
                    }
                };

                // ... (Exponential backoff logic) ...
                let response;
                let retries = 3;
                let delay = 1000;
                while (retries > 0) {
                    try {
                        response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                        if (response.ok) break;
                        if (response.status === 429 || response.status >= 500) {
                            if (retries === 1) throw new Error(`API call failed with status: ${response.status}`);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2;
                        } else { throw new Error(`API call failed with status: ${response.status}`); }
                    } catch (error) {
                         if (retries === 1) throw error;
                         await new Promise(resolve => setTimeout(resolve, delay));
                         delay *= 2;
                    }
                    retries--;
                }
                if (!response || !response.ok) throw new Error(`API call failed after retries.`);
                // ... (End of backoff logic) ...

                const result = await response.json();
                if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                    return JSON.parse(result.candidates[0].content.parts[0].text);
                } else {
                    console.error("Invalid API response structure:", result);
                    throw new Error("AI did not return a valid post analysis.");
                }
            }


            // --- NEW: AI AD COPY GENERATOR CODE ---
            const generateAdButton = document.getElementById('generate-ad-button');
            const adProductNameInput = document.getElementById('ad-product-name');
            const adKeyPointsInput = document.getElementById('ad-key-points');
            const adLoadingSpinner = document.getElementById('ad-gen-loading');
            const adResultsDiv = document.getElementById('ad-gen-results');
            const adCopyOutput = document.getElementById('ad-copy-output');
            const copyAdButton = document.getElementById('copy-ad-button');
            const copySuccessMsg = document.getElementById('copy-success-msg');

            if (generateAdButton) {
                generateAdButton.addEventListener('click', async () => {
                    const productName = adProductNameInput.value;
                    const keyPoints = adKeyPointsInput.value;

                    if (productName.trim().length < 2) {
                        adResultsDiv.classList.remove('hidden');
                        adCopyOutput.value = "សូមបញ្ចូលឈ្មោះផលិតផល។";
                        return;
                    }

                    adLoadingSpinner.classList.remove('hidden');
                    adResultsDiv.classList.add('hidden');
                    generateAdButton.disabled = true;
                    generateAdButton.classList.add('opacity-75');

                    try {
                        const adCopy = await getAiAdCopy(productName, keyPoints);
                        adCopyOutput.value = adCopy;
                        adResultsDiv.classList.remove('hidden');
                    } catch (error) {
                        console.error("Error fetching AI ad copy:", error);
                        adResultsDiv.classList.remove('hidden');
                        adCopyOutput.value = "មានបញ្ហាក្នុងការទាក់ទង AI។ សូមព្យាយាមម្តងទៀត។";
                    } finally {
                        adLoadingSpinner.classList.add('hidden');
                        generateAdButton.disabled = false;
                        generateAdButton.classList.remove('opacity-75');
                    }
                });
            }

            if (copyAdButton) {
                copyAdButton.addEventListener('click', () => {
                    adCopyOutput.select();
                    document.execCommand('copy');
                    copySuccessMsg.classList.remove('hidden');
                    setTimeout(() => {
                        copySuccessMsg.classList.add('hidden');
                    }, 2000);
                });
            }

            // --- NEW: AI AD COPY API CALL ---
            async function getAiAdCopy(productName, keyPoints) {
                const apiKey = "AIzaSyBFsZOA7uK4kb0nFign9q_o-HxImjgQW8A"; // ADDED API KEY
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                const systemPrompt = "You are an expert Cambodian Facebook copywriter. Your job is to write compelling, engaging, and high-converting ad copy in Khmer. The copy should be friendly, use emojis, and have a clear call-to-action (CTA).";
                let userQuery = `Write a Facebook ad copy for a product called "${productName}".`;
                if (keyPoints.trim().length > 0) {
                    userQuery += ` Key selling points are: ${keyPoints}.`;
                }
                userQuery += ` The ad copy should be in Khmer, use relevant emojis, and end with a strong CTA like "📩 ឆាត​សួរ​ព័ត៌មាន​ឥឡូវ​នេះ!" or "📞 ទាក់ទង​ទិញ​: 012 345 678".`;

                const payload = {
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                    contents: [{ parts: [{ text: userQuery }] }]
                };

                // ... (Exponential backoff logic) ...
                let response;
                let retries = 3;
                let delay = 1000;
                while (retries > 0) {
                    try {
                        response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                        if (response.ok) break;
                        if (response.status === 429 || response.status >= 500) {
                            if (retries === 1) throw new Error(`API call failed with status: ${response.status}`);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2;
                        } else { throw new Error(`API call failed with status: ${response.status}`); }
                    } catch (error) {
                         if (retries === 1) throw error;
                         await new Promise(resolve => setTimeout(resolve, delay));
                         delay *= 2;
                    }
                    retries--;
                }
                if (!response || !response.ok) throw new Error(`API call failed after retries.`);
                // ... (End of backoff logic) ...

                const result = await response.json();
                if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                    return result.candidates[0].content.parts[0].text;
                } else {
                    console.error("Invalid API response structure:", result);
                    throw new Error("AI did not return valid ad copy.");
                }
            }


            // --- AI AUDIENCE FINDER CODE ---
            const findAudienceButton = document.getElementById('find-audience-button');
            const productInput = document.getElementById('product-input');
            const audienceLoadingSpinner = document.getElementById('audience-scan-loading');
            const audienceResultsDiv = document.getElementById('audience-scan-results');

            if (findAudienceButton) {
                findAudienceButton.addEventListener('click', async () => {
                    const productName = productInput.value;

                    if (productName.trim().length < 2) {
                        audienceResultsDiv.innerHTML = `<p class="text-red-600 font-semibold">សូមបញ្ចូលឈ្មោះផលិតផល (យ៉ាងហោចណាស់ 2 តួអក្សរ) ដើម្បីវិភាគ។</p>`;
                        audienceResultsDiv.classList.remove('hidden');
                        audienceLoadingSpinner.classList.add('hidden');
                        return;
                    }

                    audienceLoadingSpinner.classList.remove('hidden');
                    audienceResultsDiv.classList.add('hidden');
                    findAudienceButton.disabled = true;
                    findAudienceButton.classList.add('opacity-75');

                    try {
                        const audience = await getAiAudienceSuggestion(productName);
                        
                        let resultsHTML = `
                            <h3 class="text-2xl font-bold text-center mb-4 text-purple-700">AI ណែនាំសម្រាប់ផលិតផល៖ "${audience.productName || productName}"</h3>
                            <ul class="space-y-3 text-base">
                                <li><strong>👥 ប្រជាសាស្ត្រ៖</strong> ${audience.demographics}</li>
                                <li><strong>📍 ទីតាំង៖</strong> ${audience.location}</li>
                                <li><strong>❤️ ចំណាប់អារម្មណ៍៖</strong> ${audience.interests}</li>
                                <li><strong>🏃 ឥរិយាបថ៖</strong> ${audience.behaviors}</li>
                            </ul>
                            <p class="text-sm text-gray-600 mt-4 pt-4 border-t border-purple-200">
                                <strong>កំណត់សម្គាល់៖</strong> នេះគឺជាការណែនាំពី AI។ សូមប្រើទិន្នន័យនេះជាមូលដ្ឋាន និងកែសម្រួលវានៅក្នុង Ads Manager របស់អ្នក។
                            </p>
                        `;

                        audienceResultsDiv.innerHTML = resultsHTML;
                        audienceResultsDiv.classList.remove('hidden');

                    } catch (error) {
                        console.error("Error fetching AI audience:", error);
                        audienceResultsDiv.innerHTML = `<p class="text-red-600 font-semibold">មានបញ្ហាក្នុងការទាក់ទង AI។ សូមព្យាយាមម្តងទៀត។</p>`;
                        audienceResultsDiv.classList.remove('hidden');
                    } finally {
                        audienceLoadingSpinner.classList.add('hidden');
                        findAudienceButton.disabled = false;
                        findAudienceButton.classList.remove('opacity-75');
                    }
                });
            }

            // --- AI AUDIENCE SUGGESTION API CALL ---
            async function getAiAudienceSuggestion(productName) {
                const apiKey = "AIzaSyBFsZOA7uK4kb0nFign9q_o-HxImjgQW8A"; // ADDED API KEY
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                const systemPrompt = "You are an expert Facebook marketing strategist. Your task is to provide a concise, actionable target audience suggestion for a given product, formatted as a JSON object. All responses for interests, behaviors, etc., should be relevant to the Cambodian market.";
                const userQuery = `Analyze the product "${productName}" and provide a target audience suggestion for a Facebook ad campaign in Cambodia. Provide details for demographics, location, interests, and behaviors.`;

                const payload = {
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                    contents: [{ parts: [{ text: userQuery }] }],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "OBJECT",
                            properties: {
                                "productName": { "type": "STRING" },
                                "demographics": { "type": "STRING", "description": "Age, gender, language (e.g., 'Ages 25-45, Women, Khmer & English')" },
                                "location": { "type": "STRING", "description": "Specific cities or regions in Cambodia (e.g., 'Phnom Penh, Siem Reap')" },
                                "interests": { "type": "STRING", "description": "List 3-5 key Facebook interests (e.g., 'Online Shopping, Fashion, Cosmetics')" },
                                "behaviors": { "type": "STRING", "description": "List 1-2 key behaviors (e.g., 'Engaged Shoppers, Use high-end mobile devices')" }
                            },
                            required: ["productName", "demographics", "location", "interests", "behaviors"]
                        }
                    }
                };

                // ... (Exponential backoff logic) ...
                let response;
                let retries = 3;
                let delay = 1000;
                while (retries > 0) {
                    try {
                        response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                        if (response.ok) break;
                        if (response.status === 429 || response.status >= 500) {
                            if (retries === 1) throw new Error(`API call failed with status: ${response.status}`);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2;
                        } else { throw new Error(`API call failed with status: ${response.status}`); }
                    } catch (error) {
                         if (retries === 1) throw error;
                         await new Promise(resolve => setTimeout(resolve, delay));
                         delay *= 2;
                    }
                    retries--;
                }
                if (!response || !response.ok) throw new Error(`API call failed after retries.`);
                // ... (End of backoff logic) ...

                const result = await response.json();
                if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                    return JSON.parse(result.candidates[0].content.parts[0].text);
                } else {
                    console.error("Invalid API response structure:", result);
                    throw new Error("AI did not return a valid audience suggestion.");
                }
            }


            // --- NEW: AI PRICE TRACKER CODE ---
            const findPriceButton = document.getElementById('find-price-button');
            const priceProductNameInput = document.getElementById('price-product-name');
            const priceLoadingSpinner = document.getElementById('price-scan-loading');
            const priceResultsDiv = document.getElementById('price-scan-results');

            if (findPriceButton) {
                findPriceButton.addEventListener('click', async () => {
                    const productName = priceProductNameInput.value;

                    if (productName.trim().length < 2) {
                        priceResultsDiv.innerHTML = `<p class="text-red-600 font-semibold">សូមបញ្ចូលឈ្មោះទំនិញ (យ៉ាងហោចណាស់ 2 តួអក្សរ)។</p>`;
                        priceResultsDiv.classList.remove('hidden');
                        priceLoadingSpinner.classList.add('hidden');
                        return;
                    }

                    priceLoadingSpinner.classList.remove('hidden');
                    priceResultsDiv.classList.add('hidden');
                    findPriceButton.disabled = true;
                    findPriceButton.classList.add('opacity-75');

                    try {
                        const priceInfo = await getAiPriceSuggestion(productName);
                        
                        let resultsHTML = `
                            <h3 class="text-2xl font-bold text-center mb-4 text-red-700">តម្លៃប៉ាន់ស្មានសម្រាប់៖ "${priceInfo.productName}"</h3>
                            <div classs="text-center">
                                <p class="text-4xl font-bold text-gray-900">${priceInfo.estimatedPrice}</p>
                                <p class="text-gray-600">(${priceInfo.priceRange})</p>
                            </div>
                            <div class="mt-4 pt-4 border-t border-red-200">
                                <h4 class="font-semibold text-gray-800">ការវិភាគទីផ្សារ៖</h4>
                                <p class="text-gray-700">${priceInfo.analysis}</p>
                            </div>
                            <p class="text-xs text-gray-500 mt-4">
                                <strong>ការបដិសេធ៖</strong> តម្លៃនេះគឺជាការប៉ាន់ស្មានដោយ AI ពីប្រភពសាធារណៈ និងអាចប្រែប្រួល។
                            </p>
                        `;

                        priceResultsDiv.innerHTML = resultsHTML;
                        priceResultsDiv.classList.remove('hidden');

                    } catch (error) {
                        console.error("Error fetching AI price info:", error);
                        priceResultsDiv.innerHTML = `<p class="text-red-600 font-semibold">មានបញ្ហាក្នុងការទាក់ទង AI។ សូមព្យាយាមម្តងទៀត។</p>`;
                        priceResultsDiv.classList.remove('hidden');
                    } finally {
                        priceLoadingSpinner.classList.add('hidden');
                        findPriceButton.disabled = false;
                        findPriceButton.classList.remove('opacity-75');
                    }
                });
            }

            // --- NEW: AI PRICE SUGGESTION API CALL ---
            async function getAiPriceSuggestion(productName) {
                const apiKey = "AIzaSyBFsZOA7uK4kb0nFign9q_o-HxImjgQW8A"; // ADDED API KEY
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                const systemPrompt = "You are a Cambodian market analyst AI. Your job is to estimate the current price for a product in Cambodia based on your internal knowledge. You must respond in JSON."; // CHANGED - Removed 'Google Search grounding'
                const userQuery = `Estimate the current market price for "${productName}" in Cambodia. Provide the product name, a single estimated price (e.g., "$150" or "150,000៛"), a price range (e.g., "$145 - $155"), and a brief 1-2 sentence analysis of the market.`; // CHANGED - "Find" to "Estimate"

                const payload = {
                    // tools: [{ "google_search": {} }], // REMOVED - This was likely causing the 401 Unauthorized error.
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                    contents: [{ parts: [{ text: userQuery }] }],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "OBJECT",
                            properties: {
                                "productName": { "type": "STRING" },
                                "estimatedPrice": { "type": "STRING", "description": "A single estimated price, e.g., '$1,200'" },
                                "priceRange": { "type": "STRING", "description": "The likely price range, e.g., '$1,150 - $1,250'" },
                                "analysis": { "type": "STRING", "description": "1-2 sentence market analysis in Khmer." }
                            },
                            required: ["productName", "estimatedPrice", "priceRange", "analysis"]
                        }
                    }
                };

                // ... (Exponential backoff logic) ...
                let response;
                let retries = 3;
                let delay = 1000;
                while (retries > 0) {
                    try {
                        response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                        if (response.ok) break;
                        if (response.status === 429 || response.status >= 500) {
                            if (retries === 1) throw new Error(`API call failed with status: ${response.status}`);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2;
                        } else { throw new Error(`API call failed with status: ${response.status}`); }
                    } catch (error) {
                         if (retries === 1) throw error;
                         await new Promise(resolve => setTimeout(resolve, delay));
                         delay *= 2;
                    }
                    retries--;
                }
                if (!response || !response.ok) throw new Error(`API call failed after retries.`);
                // ... (End of backoff logic) ...

                const result = await response.json();
                if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                    return JSON.parse(result.candidates[0].content.parts[0].text);
                } else {
                    console.error("Invalid API response structure:", result);
                    throw new Error("AI did not return valid price information.");
                }
            }


            // --- TELEGRAM FORM SENDER ---
            const telegramForm = document.getElementById('telegram-form');
            const sendMessageButton = document.getElementById('send-message-button');
            const formSuccessMessage = document.getElementById('form-success-message');
            const formErrorMessage = document.getElementById('form-error-message');

            // User's provided variables
            //bot token
            var telegram_bot_id = "8273106488:AAHHTDMqoZemCK563T-YQMB4arMYl5Ntq-w";
            //chat id
            var chat_id = 1126254088;
            
            if (telegramForm) {
                telegramForm.addEventListener('submit', async (e) => {
                    e.preventDefault(); // Prevent default form submission
                    sendMessageButton.disabled = true;
                    sendMessageButton.classList.add('opacity-75');
                    formSuccessMessage.classList.add('hidden');
                    formErrorMessage.classList.add('hidden');

                    const nameInput = document.getElementById("name");
                    const emailInput = document.getElementById("email");
                    const messageInput = document.getElementById("message");

                    const u_name = nameInput.value;
                    const email = emailInput.value;
                    const messageText = messageInput.value;
                    const message = `Name: ${u_name}\nEmail: ${email}\nMessage: ${messageText}`;

                    const url = `https://api.telegram.org/bot${telegram_bot_id}/sendMessage`;
                    
                    try {
                        const response = await fetch(url, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                chat_id: chat_id,
                                text: message
                            })
                        });

                        const result = await response.json();

                        if (response.ok && result.ok) {
                            console.log(result);
                            formSuccessMessage.classList.remove('hidden');
                            nameInput.value = "";
                            emailInput.value = "";
                            messageInput.value = "";
                        } else {
                            throw new Error(result.description || "Failed to send message");
                        }

                    } catch (error) {
                        console.error("Telegram Send Error:", error);
                        formErrorMessage.textContent = `មានបញ្ហាក្នុងការផ្ញើសារ៖ ${error.message}`;
                        formErrorMessage.classList.remove('hidden');
                    } finally {
                        sendMessageButton.disabled = false;
                        sendMessageButton.classList.remove('opacity-75');
                    }
                });
            }

        }); // End of DOMContentLoaded
    </script>


</body>
</html>

